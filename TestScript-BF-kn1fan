local Library = loadstring(game:HttpGet("https://raw.githubusercontent.com/tbao143/Library-ui/refs/heads/main/Redzhubui"))()
workspace.FallenPartsDestroyHeight = -math.huge

local Window = Library:MakeWindow({
    Title = "lava Hub | Blox Fruits ",
    SubTitle = "by: @kn1fan / lava85halst",
    LoadText = "Loading lava Hub",
    Flags = "ChaosHub_Broookhaven"
})
Window:AddMinimizeButton({
    Button = { Image = "rbxassetid://72674068736695", BackgroundTransparency = 0 },
    Corner = { CornerRadius = UDim.new(35, 1) },
})

local LevelFarm = Window:MakeTab({ Title = "–§–∞—Ä–º lvl", Icon = "rbxassetid://13364900349" })

-- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞—Ä–º–∏–Ω–≥–æ–º —É—Ä–æ–≤–Ω–µ–π
local isLevelFarming = false
local currentSea = 1

-- –°–µ–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–æ—Ä–µ–π
LevelFarm:AddSection({ "1 –ú–æ—Ä–µ" })

LevelFarm:AddButton({
    Name = "–í–∫–ª—é—á–∏—Ç—å —Ñ–∞—Ä–º 1 –º–æ—Ä–µ",
    Description = "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–∞—Ä–º–∏—Ç —É—Ä–æ–≤–Ω–∏ –Ω–∞ 1 –º–æ—Ä–µ",
    Callback = function()
        if isLevelFarming then
            print("–§–∞—Ä–º–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π —É–∂–µ –∑–∞–ø—É—â–µ–Ω")
            return
        end
        
        currentSea = 1
        startLevelFarm()
    end
})

LevelFarm:AddButton({
    Name = "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ–∞—Ä–º",
    Description = "–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–∞—Ä–º–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π",
    Callback = function()
        stopLevelFarm()
    end
})

-- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è 2 –∏ 3 –º–æ—Ä—è...

-- –§—É–Ω–∫—Ü–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ñ–∞—Ä–º–∞ —É—Ä–æ–≤–Ω–µ–π
function stopLevelFarm()
    isLevelFarming = false
    print("‚úÖ –§–∞—Ä–º–∏–Ω–≥ —É—Ä–æ–≤–Ω–µ–π –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
end

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–ª–µ—Ç–∞
local function safeFlyToPosition(targetPosition, speed)
    local Players = game:GetService("Players")
    local localPlayer = Players.LocalPlayer
    local character = localPlayer.Character
    
    if not character or not character:FindFirstChild("HumanoidRootPart") then
        return false
    end
    
    local rootPart = character.HumanoidRootPart
    
    -- –í–∫–ª—é—á–∞–µ–º NoClip
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") and part.CanCollide then
            part.CanCollide = false
        end
    end
    
    -- –°–æ–∑–¥–∞–µ–º BodyVelocity –¥–ª—è –ø–æ–ª–µ—Ç–∞
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
    bodyVelocity.MaxForce = Vector3.new(100000, 100000, 100000)
    bodyVelocity.Parent = rootPart
    
    local startPos = rootPart.Position
    local distance = (targetPosition - startPos).Magnitude
    local maxTime = math.min(30, distance / speed + 10) -- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ç–∞–π–º–∞—É—Ç
    
    print("üõ´ –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–ª–µ—Ç –∫ —Ü–µ–ª–∏. –î–∏—Å—Ç–∞–Ω—Ü–∏—è: " .. math.floor(distance))
    
    local startTime = tick()
    
    while isLevelFarming and character and rootPart and bodyVelocity.Parent do
        local currentPos = rootPart.Position
        local currentDistance = (targetPosition - currentPos).Magnitude
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç–∏–≥–ª–∏ –ª–∏ —Ü–µ–ª–∏
        if currentDistance < 10 then
            print("‚úÖ –î–æ—Å—Ç–∏–≥–ª–∏ —Ü–µ–ª–∏")
            break
        end
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–∞–π–º–∞—É—Ç
        if tick() - startTime > maxTime then
            print("‚è∞ –¢–∞–π–º–∞—É—Ç –ø–æ–ª–µ—Ç–∞")
            break
        end
        
        -- –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–æ–∑–∏—Ü–∏–∏
        if currentPos.Y < -100 or currentPos.Y > 1000 then
            print("‚ö†Ô∏è –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞—è –≤—ã—Å–æ—Ç–∞: " .. currentPos.Y)
            -- –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ–º –≤—ã—Å–æ—Ç—É
            local correctedPos = Vector3.new(targetPosition.X, math.max(20, targetPosition.Y), targetPosition.Z)
            targetPosition = correctedPos
        end
        
        -- –í—ã—á–∏—Å–ª—è–µ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
        local direction = (targetPosition - currentPos).Unit
        local adjustedSpeed = math.min(speed, currentDistance * 2) -- –ó–∞–º–µ–¥–ª—è–µ–º—Å—è –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏
        
        bodyVelocity.Velocity = direction * adjustedSpeed
        
        wait()
    end
    
    -- –ü–ª–∞–≤–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º—Å—è
    if bodyVelocity and bodyVelocity.Parent then
        for i = 1, 5 do
            bodyVelocity.Velocity = bodyVelocity.Velocity * 0.5
            wait(0.1)
        end
        bodyVelocity:Destroy()
    end
    
    return true
end

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–∞ NPC
local function findNPC(npcName)
    -- –°–Ω–∞—á–∞–ª–∞ –∏—â–µ–º –≤ NPCs
    local npcFolder = workspace:FindFirstChild("NPCs")
    if npcFolder then
        for _, npc in pairs(npcFolder:GetChildren()) do
            if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
                if string.lower(npc.Name) == string.lower(npcName) or 
                   string.find(string.lower(npc.Name), string.lower(npcName)) then
                    return npc
                end
            end
        end
    end
    
    -- –ò—â–µ–º –≤–æ –≤—Å–µ–º workspace
    for _, npc in pairs(workspace:GetChildren()) do
        if npc:IsA("Model") and npc:FindFirstChild("HumanoidRootPart") then
            local humanoid = npc:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health > 0 then
                if string.lower(npc.Name) == string.lower(npcName) or 
                   string.find(string.lower(npc.Name), string.lower(npcName)) then
                    return npc
                end
            end
        end
    end
    
    return nil
end

-- –£–ª—É—á—à–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–≤–µ—Å—Ç–µ
local function getQuestInfo(level)
    local questData = {
        npcName = "",
        mobName = "",
        npcPosition = nil,
        mobPositions = {}
    }
    
    if currentSea == 1 then
        if level < 10 then
            questData.npcName = "Bandit"
            questData.mobName = "Bandit"
        elseif level < 20 then
            questData.npcName = "Monkey"
            questData.mobName = "Monkey"
        elseif level < 30 then
            questData.npcName = "Gorilla"
            questData.mobName = "Gorilla"
        elseif level < 40 then
            questData.npcName = "Pirate"
            questData.mobName = "Pirate"
        else
            questData.npcName = "Desert Bandit"
            questData.mobName = "Desert Bandit"
        end
    elseif currentSea == 2 then
        if level < 750 then
            questData.npcName = "Marine Captain"
            questData.mobName = "Marine Captain"
        else
            questData.npcName = "Galley Captain"
            questData.mobName = "Galley Captain"
        end
    elseif currentSea == 3 then
        questData.npcName = "Pirate Millionaire"
        questData.mobName = "Pirate Millionaire"
    end
    
    -- –ù–∞—Ö–æ–¥–∏–º —Ä–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ NPC
    local actualNPC = findNPC(questData.npcName)
    if actualNPC then
        questData.npcPosition = actualNPC.HumanoidRootPart.Position
        print("‚úÖ –ù–∞—à–ª–∏ NPC " .. questData.npcName .. " –Ω–∞ –ø–æ–∑–∏—Ü–∏–∏: " .. tostring(questData.npcPosition))
    else
        print("‚ùå NPC " .. questData.npcName .. " –Ω–µ –Ω–∞–π–¥–µ–Ω!")
        return nil
    end
    
    return questData
end

-- –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Ñ–∞—Ä–º–∞ —É—Ä–æ–≤–Ω–µ–π
function startLevelFarm()
    local Players = game:GetService("Players")
    local localPlayer = Players.LocalPlayer
    
    isLevelFarming = true
    
    spawn(function()
        while isLevelFarming do
            if not localPlayer.Character or not localPlayer.Character:FindFirstChild("Humanoid") or localPlayer.Character.Humanoid.Health <= 0 then
                print("‚ùå –ü–µ—Ä—Å–æ–Ω–∞–∂ –º–µ—Ä—Ç–≤ –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç")
                wait(5)
                continue
            end
            
            local currentLevel = getPlayerLevel()
            print("üéØ –¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å: " .. currentLevel)
            
            -- –ü–æ–ª—É—á–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–≤–µ—Å—Ç–µ
            local questInfo = getQuestInfo(currentLevel)
            if not questInfo then
                print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–≤–µ—Å—Ç–µ")
                wait(5)
                continue
            end
            
            -- –ë–µ—Ä–µ–º –∫–≤–µ—Å—Ç
            print("üõ´ –õ–µ—Ç–∏–º –∫ NPC: " .. questInfo.npcName)
            local flySuccess = safeFlyToPosition(questInfo.npcPosition + Vector3.new(0, 5, 0), 100)
            
            if flySuccess then
                wait(2)
                print("‚úÖ –î–æ—Å—Ç–∏–≥–ª–∏ NPC, –Ω–∞—á–∏–Ω–∞–µ–º —Ñ–∞—Ä–º –º–æ–±–æ–≤...")
                
                -- –ó–¥–µ—Å—å –¥–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏–∫—É —Ñ–∞—Ä–º–∞ –º–æ–±–æ–≤
                farmMobs(questInfo.mobName)
            else
                print("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –¥–æ–ª–µ—Ç–µ—Ç—å –¥–æ NPC")
            end
            
            wait(1)
        end
    end)
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–≤–Ω—è –∏–≥—Ä–æ–∫–∞
local function getPlayerLevel()
    local localPlayer = game:GetService("Players").LocalPlayer
    if localPlayer and localPlayer:FindFirstChild("Data") and localPlayer.Data:FindFirstChild("Level") then
        return localPlayer.Data.Level.Value
    end
    return 1
end

-- –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–∞—Ä–º–∞ –º–æ–±–æ–≤ (–¥–æ–±–∞–≤—å—Ç–µ —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é)
local function farmMobs(mobName)
    -- –í–∞—à–∞ –ª–æ–≥–∏–∫–∞ —Ñ–∞—Ä–º–∞ –º–æ–±–æ–≤ –∑–¥–µ—Å—å
    print("üî´ –ù–∞—á–∏–Ω–∞–µ–º —Ñ–∞—Ä–º –º–æ–±–æ–≤: " .. mobName)
end
